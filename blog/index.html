<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.63">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-179528483-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-179528483-1",{})</script><title data-react-helmet="true">Blog | Create Full Stack</title><meta data-react-helmet="true" property="og:title" content="Blog | Create Full Stack"><meta data-react-helmet="true" name="description" content="Blog"><meta data-react-helmet="true" property="og:description" content="Blog"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://create-full-stack.com/img/logo.svg"><meta data-react-helmet="true" property="twitter:image" content="https://create-full-stack.com/img/logo.svg"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for One full-stack to rule them all!"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/styles.9e40a809.css">
<link rel="preload" href="/styles.29eede3f.js" as="script">
<link rel="preload" href="/runtime~main.80094b2d.js" as="script">
<link rel="preload" href="/main.6b871871.js" as="script">
<link rel="preload" href="/1.ca737054.js" as="script">
<link rel="preload" href="/2.e9152e85.js" as="script">
<link rel="preload" href="/3.8c8ddb53.js" as="script">
<link rel="preload" href="/a6aa9e1f.eb2edb30.js" as="script">
<link rel="preload" href="/c646f9a1.753546fa.js" as="script">
<link rel="preload" href="/af99198f.290c964e.js" as="script">
<link rel="preload" href="/b2b675dd.3b8ed448.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Create Full Stack"><strong class="navbar__title">Create Full Stack</strong></a><a class="navbar__item navbar__link" href="/docs/">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/tiagob/create-full-stack" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2rYK"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_1W7I">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_1W7I">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Create Full Stack"><strong class="navbar__title">Create Full Stack</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Docs</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/tiagob/create-full-stack" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><main class="col col--8 col--offset-2"><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_OMOm"><a href="/blog/create_full_stack_story">Create Full Stack Story</a></h2><div class="margin-vert--md"><time datetime="2020-10-07T00:00:00.000Z" class="blogPostDate_1IXG">October 7, 2020  · 2 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/tiagob" target="_blank" rel="noreferrer noopener"><img src="https://avatars3.githubusercontent.com/u/1031522?v=4" alt="Tiago Bandeira"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/tiagob" target="_blank" rel="noreferrer noopener">Tiago Bandeira</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>Create Full Stack marries best practices I picked up over a decade developing at large tech companies like Google and Twitter to small startups like MoPub, as well as my own personal projects (<a href="https://comparehospitals.org/" target="_blank" rel="noopener noreferrer">Compare Hospitals</a>, <a href="https://apps.apple.com/us/app/id1446510851" target="_blank" rel="noopener noreferrer">Whether°</a>, <a href="https://www.youtube.com/watch?v=Ekf3k5jIGT4" target="_blank" rel="noopener noreferrer">Flixfindr</a>). At Google, I was impressed with the seamless integration of all the libraries and frameworks. The consistency across Google3 (Google&#x27;s mono-repo) is incredible. Teams across the entire organization use the same tools with the same style guidelines, and code can be shared and accessed anywhere. When starting a new project, Google developers build on a stable foundation with significant guard rails in place. On the other hand, the tools are very company-specific and focus on performance over developer productivity.</p><p>Since leaving Google and returning to the outside world, I&#x27;ve been dismayed that the same solid foundation doesn&#x27;t exist. It&#x27;s natural to cobble together solutions following one-off blog posts. A developer&#x27;s focus isn&#x27;t - and shouldn&#x27;t be - infra at an early stage, so hacky solutions tend to win. Unfortunately, as what you&#x27;re building scales, maintaining these solutions can be a nightmare.</p><p>Create Full Stack is my attempt to solve these problems and share my development philosophy. It&#x27;s inspired by tools like CRA and Expo but applied to the backend, API layer, and dev ops.</p><p>Create Full Stack is a continuation of my thoughts and feedback around my featured Medium article <em><a href="/blog/rule_them_all">One full-stack to rule them all!</a></em></p></section></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_OMOm"><a href="/blog/rule_them_all">One full-stack to rule them all!</a></h2><div class="margin-vert--md"><time datetime="2019-05-15T00:00:00.000Z" class="blogPostDate_1IXG">May 15, 2019  · 7 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/tiagob" target="_blank" rel="noreferrer noopener"><img src="https://avatars3.githubusercontent.com/u/1031522?v=4" alt="Tiago Bandeira"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/tiagob" target="_blank" rel="noreferrer noopener">Tiago Bandeira</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p><strong>Originally <a href="https://medium.com/@tiagsters/one-full-stack-to-rule-them-all-5ca39ded16c1" target="_blank" rel="noopener noreferrer">posted on Medium</a></strong></p><p>Yes, yet another todo example app! 🤦 Needed to throw my hat in the ring because the existing solutions weren’t cutting it.</p><p>We want a stack that enables rapid iteration as requirements change without producing bugs. Ideally, it should scale in terms of traffic and developers without requiring costly re-writes.</p><p>To achieve this we chose components that are:</p><ol><li>A single language, eliminating developer context switching</li><li>Type-safe, eliminating a whole class of bugs</li><li>Tested at scale in production</li><li>Used by enough developers that solutions are easy to find</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="why"></a>Why?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#why" title="Direct link to heading">#</a></h2><p>Coming from Google, I realized the importance of static types across the entire stack (including the API). There are thousands of engineers working on Search and Ads at Google (I was one of them). No one person completely understands the systems because they’ve been built over 10 years by thousands of engineers. Bringing data from the database through the Ad Server and onto Search crossed ~8 different services. Making these changes was scary, to say the least.</p><p>Static typing across the stack and a single mono repo are what make this possible. Static typing ensures the data is there and of the expected type when you access it. Mono repo ensures all services are in the same state and the API contracts (Protobufs at Google) are enforced by the compiler. At Google code that doesn’t compile can’t be checked in.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="why-typescript-ts"></a>Why TypeScript (TS)?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#why-typescript-ts" title="Direct link to heading">#</a></h2><p>What other typed languages can run on the client and server and aren’t experimental?
Having a single language reduces context switching for engineers. It gives us the confidence to own full-stack changes. TypeScript is rapidly growing in popularity. It’s a superset of JavaScript which is the most popular language of all time so most programmers are at least somewhat familiar with the syntax.</p><p>TS eliminates <a target="_blank" href="/assets/files/typestudy-769397d5e37400fe1d17b3ae2fcf1e20.pdf">15% of production bugs</a>. It scales to hundreds, if not thousands, of developers. Microsoft, Google, and countless other companies rely on it in production systems with billions of users. Google is increasingly adopting it over Closure (Google’s prehistoric typed JS language). It has great documentation and IDE support with a thriving community (<a href="https://insights.stackoverflow.com/survey/2019#technology-_-most-loved-dreaded-and-wanted-languages" target="_blank" rel="noopener noreferrer">3rd most loved language on StackOverflow</a>). It presents clear errors when the compiler fails.</p><p>The TypeScript team has been <a href="https://www.youtube.com/watch?v=Au-rrY0afe4" target="_blank" rel="noopener noreferrer">rapidly improving TS across many dimensions</a>. In the last year they added:</p><ul><li>Support for existing tools to meet developers where they are<ul><li>TS + Babel for easy integration in the React ecosystem</li><li>TS + ESLint for better linting support (TSLint is too slow)</li></ul></li><li>Improved error messages. Instead of highlighting an entire interface when there’s a type issue it jumps to the property that’s causing the issue.</li></ul><p><img alt="TypeScript v2.8 vs v3.0" src="/assets/images/typescript_comparison-1b7c7df159357f09949fecd6d4776385.png"></p><ul><li>More advanced type checking (no overloads necessary in generics). Ex. <a href="https://youtu.be/Au-rrY0afe4?t=1690" target="_blank" rel="noopener noreferrer">Promise.all</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="why-react"></a>Why React?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#why-react" title="Direct link to heading">#</a></h2><p>It’s 2019! MVC should be dead! Long live JS in templates and one-direction data flow!</p><p>JS in templates gives us access to a Turing complete language when we’re constructing what’s displayed. This pushes complexity to the leaves instead of APIs or random custom functions which reduces overall complexity (see <a href="https://www.youtube.com/watch?v=x7cQ3mrcKaY" target="_blank" rel="noopener noreferrer">Pete Hunt’s talk</a>). In Django (I have a python background pre-React), you’d use <a href="https://docs.djangoproject.com/en/2.2/ref/templates/builtins/#" target="_blank" rel="noopener noreferrer">tags, filters</a> or write your own <a href="https://docs.djangoproject.com/en/2.2/howto/custom-template-tags/#writing-custom-template-filters" target="_blank" rel="noopener noreferrer">custom versions</a> when you run into things like formatting date time ranges. Learning an extra template language and writing complicated escape hatches is a waste!</p><p>One way data flow ensures there’s a single source of truth and you don’t run into bugs where the same value could be in different states. Google just announced Compose, a React-like framework, in Android. They dive into the issues with two-way data bindings in <a href="https://www.youtube.com/watch?v=VsStyq4Lzxo" target="_blank" rel="noopener noreferrer">their talk at IO</a>.</p><p>Since React’s public launch in 2013, it’s only gotten better and grown in popularity. Many of the worlds most used sites are completely or nearly completely written in React (<a href="https://medium.com/@paularmstrong/twitter-lite-and-high-performance-react-progressive-web-apps-at-scale-d28a00e780a3" target="_blank" rel="noopener noreferrer">Twitter</a>, <a href="https://medium.com/netflix-techblog/netflix-likes-react-509675426db" target="_blank" rel="noopener noreferrer">Netflix</a>, Uber, <a href="https://developers.facebook.com/videos/2019/building-the-new-facebookcom-with-react-graphql-and-relay/" target="_blank" rel="noopener noreferrer">Facebook</a>, and Airbnb). Companies that value developer productivity are wise to adopt because it significantly reduces UI code complexity over more traditional frameworks.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="why-graphql-with-apollo"></a>Why GraphQL with Apollo?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#why-graphql-with-apollo" title="Direct link to heading">#</a></h2><p><a href="https://graphql.org/" target="_blank" rel="noopener noreferrer">GraphQL</a> provides a simple way for clients to request only the data they need and easily move across relationships. Requests can change without server modifications and deploys. Try that with REST or Protobufs!</p><p>If we extended our Todo example to have different users we could query for their specific todos. Any additional fields on either user or todo are emitted from the response but could be fetched in different queries without changes to the API</p><div class="mdxCodeBlock_24uS"><div class="codeBlockContent_142n"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1-Hy">Copy</button><div tabindex="0" class="prism-code language-graphql codeBlock_196X"><div class="codeBlockLines_1yEX" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">query</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token attr-name" style="color:rgb(255, 203, 107)">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;xxx&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    todos </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      complete</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p>Apollo has client and server support that requires less upfront learning and setup cost than Relay. It has automated TypeScript type generation through <a href="https://graphql-code-generator.com/" target="_blank" rel="noopener noreferrer">graphql-code-generator</a>. Solid documentation and tooling with a thriving community. Ability to <a href="https://blog.apollographql.com/batching-client-graphql-queries-a685f5bcd41b" target="_blank" rel="noopener noreferrer">batch queries</a> but can defer until needed, avoiding fragment complexity.</p><p>The two major distinctions from a devX perspective I see between Relay and Apollo for queries are containers and cursors. Both are required in Relay (opinionated) and optional in Apollo (flexible).</p><p>Container queries batch all query fragments (data required by each component in the subtree) into a single container level query. In the simple Todo list case, this is actually a bit tricky. It involves importing the lower level fragments and <a href="https://facebook.github.io/relay/docs/en/quick-start-guide#composing-fragments" target="_blank" rel="noopener noreferrer">composing them up the tree</a>. In Apollo, we’d simply request the data at the component level. The tradeoff is in the number of requests, containers are more efficient at the cost of complexity and difficulty debugging issues.</p><p>Cursors are a standard way for <a href="https://facebook.github.io/relay/docs/en/pagination-container" target="_blank" rel="noopener noreferrer">pagination in Relay</a>. They require the type you’re fetching to wrap additional details.</p><p>Todo GraphQL schema for Relay cursor pagination:</p><div class="mdxCodeBlock_24uS"><div class="codeBlockContent_142n"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1-Hy">Copy</button><div tabindex="0" class="prism-code language-graphql codeBlock_196X"><div class="codeBlockLines_1yEX" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># An object with an ID</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Node</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># The id of the object.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 203, 107)">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ID</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Information about pagination in a connection.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">PageInfo</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># When paginating forwards, are there more items?</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 203, 107)">hasNextPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Boolean</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># When paginating backwards, are there more items?</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 203, 107)">hasPreviousPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Boolean</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># When paginating backwards, the cursor to continue.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 203, 107)">startCursor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> String</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># When paginating forwards, the cursor to continue.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 203, 107)">endCursor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> String</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Todo</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Node</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># The ID of an object</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 203, 107)">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ID</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 203, 107)">text</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> String</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 203, 107)">complete</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Boolean</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># A connection to a list of items.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">TodoConnection</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Information to aid in pagination.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 203, 107)">pageInfo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> PageInfo</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># A list of edges.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 203, 107)">edges</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">TodoEdge</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># An edge in a connection.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">TodoEdge</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># The item at the end of the edge</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 203, 107)">node</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Todo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># A cursor for use in pagination</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 203, 107)">cursor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> String</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p>If we’re using <a href="https://www.apollographql.com/docs/react/features/pagination" target="_blank" rel="noopener noreferrer">Apollo offset based pagination</a> (assuming you have a SQL database this is straightforward), then we just need the Todo type and we pass the limit and offset in the query. The downside is that if new items are inserted or deleted in the original set it can return duplicates or skip results. Cursor based pagination fixes this.</p><p>This a simple comparison between Relay and Apollo. For Facebook, Relay’s additional complexities make sense for performance and data guarantees. For us, the added complexity didn’t make sense but it’s something we could revisit.</p><p><em><a href="https://github.com/relay-tools/relay-compiler-language-typescript/tree/master/example" target="_blank" rel="noopener noreferrer">Relay TypeScript Todo example</a> for comparison (linked from the official docs)</em></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="why-node"></a>Why Node?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#why-node" title="Direct link to heading">#</a></h2><p>Our requirement for a single language across client and server limits our server language choices.</p><p>Node has some <a href="https://www.youtube.com/watch?v=M3BM9TB-8yA" target="_blank" rel="noopener noreferrer">“regrets”</a> like security, the build system, and package.json but, the ecosystem is unparalleled.</p><p>Node is by far the most popular language on GAE and AWS Lambda. It’s great for rapid development. However, many companies also use Node at scale in production (Instagram, <a href="https://medium.com/dev-channel/a-netflix-web-performance-case-study-c0bcde26a9d9" target="_blank" rel="noopener noreferrer">Netflix</a>, <a href="https://medium.com/airbnb-engineering/operationalizing-node-js-for-server-side-rendering-c5ba718acfc9" target="_blank" rel="noopener noreferrer">Airbnb</a>, and <a href="https://medium.com/walmartlabs/the-benefits-of-server-side-rendering-over-client-side-rendering-5d07ff2cefe8" target="_blank" rel="noopener noreferrer">Walmart</a>).</p><p>Is there something else that can run TypeScript on the server safely in production? Unfortunately, <a href="https://deno.land/" target="_blank" rel="noopener noreferrer">Deno</a> (from the creator of Node) isn’t there yet.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1YVU" id="conclusions"></a>Conclusions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#conclusions" title="Direct link to heading">#</a></h2><p>While there is never truly one stack to rule them all, we believe that our set of requirements likely matches many people building web apps today. While all of these pieces have been battle tested individually the sum of their parts creates a relatively novel way of developing web apps that isn’t currently well documented.</p></section></article><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Made with ❤️ by</h4><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/tiagsters" target="_blank" rel="noopener noreferrer" class="footer__link-item">🐦 @tiagsters</a></li><li class="footer__item"><a href="https://github.com/tiagob/" target="_blank" rel="noopener noreferrer" class="footer__link-item">👨‍💻 @tiagob</a></li></ul></div></div><div class="text--center"><div></div></div></div></footer></div>
<script src="/styles.29eede3f.js"></script>
<script src="/runtime~main.80094b2d.js"></script>
<script src="/main.6b871871.js"></script>
<script src="/1.ca737054.js"></script>
<script src="/2.e9152e85.js"></script>
<script src="/3.8c8ddb53.js"></script>
<script src="/a6aa9e1f.eb2edb30.js"></script>
<script src="/c646f9a1.753546fa.js"></script>
<script src="/af99198f.290c964e.js"></script>
<script src="/b2b675dd.3b8ed448.js"></script>
</body>
</html>